<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>delay</title>
</head>
<body>
    <script>
        function a (callback) {
            setTimeout(function (){
                callback('a');
            }, 1000);
        }
        function b (callback) {
            setTimeout(function (){
                callback('b');
            },1000);
        }
        function c (callback) {
            setTimeout( function () {
                callback('c')
            }, 1000);
        }
        function d (callback) {
            setTimeout( function () {
                callback('d')
            }, 1000);
        }
        function e (callback) {
            setTimeout( function () {
                callback('e');
                // throw new Error('Error')
            }, 1000);
        }
        function f (callback) {
            setTimeout( function () {
                callback('f')
            }, 2000);
        }
        function g (callback) {
            setTimeout( function () {
                callback('g')
            }, 1000);
        }
    </script>
    <script>
        var startTime1 = + new Date;
        a(function(a){
            b(function (b){
                c(function (c){
                    d(function (d){
                        e(function (e){
                            f(function (f){
                                g(function (g){
                                    console.log('a + b + c + d + e + f + g : ' + (a + b + c + d + e + f + g));
                                    console.log('不使用delay,耗时' +(+new Date - startTime1) + 'ms');
                                })
                            })
                        })
                    })
                })
            })
        })
    </script>
    <script src="delay.js"></script>
    <script>
        var startTime2 = + new Date;
        delay([a, b, c, d, e, f, g], function (a, b, c, d, e, f, g){
            console.log('a + b + c + d + e + f + g: ' + (a + b + c + d + e + f + g));
            console.log('使用delay,耗时' + (+new Date - startTime2) + 'ms');
        });
    </script>
</body>
</html>